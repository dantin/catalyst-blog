---
title: Number of Leading Zeros
date: 2016-11-01 11:41:00
categories: 工程
tags: JDK
toc: true
---

求一个Integer的二进制表示中首部开始0的个数。

### JDK实现

这部分源码在java.lang.Integer中。

```java
public static int numberOfLeadingZeros(int i) {
    if (i == 0)
        return 32;
    int n = 1;
    if (i >>> 16 == 0) { n += 16; i <<= 16; }
    if (i >>> 24 == 0) { n +=  8; i <<=  8; }
    if (i >>> 28 == 0) { n +=  4; i <<=  4; }
    if (i >>> 30 == 0) { n +=  2; i <<=  2; }
    n -= i >>> 31;
    return n;
}
```

### 分析

这里的思想二分查找，首先把32位的数分为高低16位，如果非零值位于高16位，后续再将高16位继续二分为高低8位，直至到二分到集合中只有1个元素。

在定位从左边开始第一个非零值的位置的同时，顺便累加从左边开始0的个数。

步骤如下：

1. 将i无符号右移16位后，有二种情况；
    1. i = 0, 则第一个非零值位于低16位，i至少有16个0，同时将i左移16位（把低16位移到原高16位的位置，这样情况1和情况2就能统一后续的判断方式）
    2. i != 0, 则第一个非零值位于高16位，后续在高16位中继续判断
2. 判断第一个非零值是否位于高8位
3. 判断第一个非零值是否位于高4位
4. 判断第一个非零值是否位于高2位
5. 判断第一个非零值是否位于左边第一位
